<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>DEAR MY SUMMER</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #f0f0f0;
      overflow-x: hidden;
    }

    .main-section {
      height: 100vh;
      width: 100vw;
      position: relative;
      overflow: hidden;
      background: #fffbe6;
      background-image: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.4)),url(/image/mainbg.jpg);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    }

    .introduction-section {
      height: 100vh;
      width: 100vw;
    }

    .observe {
  position: absolute;
  opacity: 0;
  transition: opacity 1s ease, transform 1s ease;
  will-change: opacity, transform;
}


.observe img {
  display: block;
  max-width: 100%;
  height: auto;
  
}


.box {
  /* border: 1px solid #999; */
  padding: 20px;
  border-radius: 8px;
}

.top-left {
  top: 30px;
  left: 30px;
  z-index: 1;
}

.center {
  top: 50%;
  left: 50%;
  text-align: center;
  transform: translate(-50%, -50%);
display: flex;
  justify-content: center;
  align-items: center;
}
.center img{
    width: 85%;
    height: auto;
}

.bottom-right {
  bottom: 10px;
  right: 20px;
}

.visible {
  opacity: 1;
}
  </style>
</head>
<body>
  <div class="main-section">
  <div class="observe box top-left" data-pos="top-left">
    <img src="/image/willyou.png" />
  </div>
  <div class="observe box center" data-pos="center">
    <img src="/image/mainimg.png" />
  </div>
  <div class="observe box bottom-right" data-pos="bottom-right">
    <img src="/image/waywardplane.png" />
  </div>
</div>

<div class="introduction-section"></div>






  <!-- GSAP CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <!-- <script>
    gsap.registerPlugin(ScrollTrigger);

    // 각 요소에 맞는 슬라이드 방향 설정
    const elements = document.querySelectorAll(".element");

    elements.forEach((el) => {
  let fromVars = { opacity: 0 };
  let toVars = {
    opacity: 1,
    duration: 0.6,
    ease: "power2.out",
    scrollTrigger: {
      trigger: el,
      start: "top 75%",
      end: "bottom 25%",
      toggleActions: "play reverse play reverse",
      // markers: true, // ← 디버깅 시 켜기
    }
  };

  if (el.classList.contains("top-left")) {
    fromVars.x = -50;
    toVars.x = 0;
  } else if (el.classList.contains("bottom-right")) {
    fromVars.x = 50;
    toVars.x = 0;
  } else if (el.classList.contains("center")) {
    // 1) 시작 위치는 아래쪽에서 살짝 올라오도록
    fromVars.yPercent = -50;
    fromVars.y = 30;

    // 2) 도착 위치는 정중앙보다 10px 아래
    toVars.xPercent = -50;
    toVars.yPercent = -50;
    toVars.y = 10;
  }

  gsap.fromTo(el, fromVars, toVars);
});

  </script> -->
<!-- <script>
    gsap.registerPlugin(ScrollTrigger);

const elements = document.querySelectorAll(".box");

// 각 요소마다 고유의 순서값 부여 (등장 애니메이션용)
const orderMap = {
  "top-left": 0,
  "center": 1,
  "bottom-right": 2,
};

elements.forEach((el) => {
  const classes = el.classList;
  const order = Object.keys(orderMap).find(cls => classes.contains(cls));
  const delay = orderMap[order] * 0.3;

  let fromVars = { opacity: 0 };
  let toVars = {
    opacity: 1,
    duration: 0.6,
    delay,
    ease: "power2.out",
    scrollTrigger: {
      trigger: el,
      start: "top 75%",
      end: "bottom 25%",
      toggleActions: "play reverse play reverse",
      scrub: false,
    }
  };

  if (classes.contains("top-left")) {
    fromVars.x = -50;
    toVars.x = 0;
  } else if (classes.contains("bottom-right")) {
    fromVars.x = 50;
    toVars.x = 0;
  } else if (classes.contains("center")) {
    fromVars.y = 30;
    toVars.y = 0;
  }

  gsap.fromTo(el, fromVars, toVars);
});

</script> -->
    <script>
document.addEventListener("DOMContentLoaded", () => {
  const observerOptions = {
    root: null,
    rootMargin: "0px",
    threshold: 0.5
  };

  const order = {
    "top-left": 0,
    "center": 1,
    "bottom-right": 2
  };

  const reverseOrder = {
    "top-left": 2,
    "center": 1,
    "bottom-right": 0
  };

  const elements = document.querySelectorAll(".observe");

  // ⬇️ 초기 진입 애니메이션
  elements.forEach((el) => {
  const pos = el.dataset.pos;

  // 초기 위치와 투명 설정
  setInitialTransform(el);
  el.classList.remove("visible");

  // 브라우저가 초기 상태 렌더링할 시간을 충분히 줌
  setTimeout(() => {
    requestAnimationFrame(() => {
      el.classList.add("visible");
      applyInitialTransform(el);
    });
  }, order[pos] * 300 + 100); // 각 요소 순차 등장 + 약간 지연
});




  // ⬇️ 스크롤 트리거
  const observer = new IntersectionObserver((entries) => {
    const appearing = [];
    const disappearing = [];

    entries.forEach(entry => {
      if (entry.intersectionRatio >= 0.5) {
        appearing.push(entry.target);
      } else {
        disappearing.push(entry.target);
      }
    });

    // 나타날 때: 우하 → 중 → 좌상
    appearing.sort((a, b) => reverseOrder[a.dataset.pos] - reverseOrder[b.dataset.pos]);
    appearing.forEach((el, i) => {
      setTimeout(() => {
        el.classList.add("visible");
        applyInitialTransform(el);
      }, i * 300);
    });

    // 사라질 때: 좌상 → 중 → 우하
    disappearing.sort((a, b) => order[a.dataset.pos] - order[b.dataset.pos]);
    disappearing.forEach((el, i) => {
      setTimeout(() => {
        el.classList.remove("visible");
        setInitialTransform(el); // 사라질 때 다시 시작 위치로
      }, i * 300);
    });

  }, observerOptions);

  elements.forEach(el => observer.observe(el));

  // ⬇️ 애니메이션 시작 위치 설정
  function setInitialTransform(el) {
    const pos = el.dataset.pos;
    if (pos === "center") {
      el.style.transform = "translate(-50%, -50%) translateY(80px)";
    } else if (pos === "top-left") {
      el.style.transform = "translateX(-50px)";
    } else if (pos === "bottom-right") {
      el.style.transform = "translateX(50px)";
    }
  }

  // ⬇️ 애니메이션 종료 위치 설정
  function applyInitialTransform(el) {
    const pos = el.dataset.pos;
    if (pos === "center") {
      el.style.transform = "translate(-50%, -50%) translateY(10px)";
    } else {
      el.style.transform = "translate(0, 0)";
    }
  }
});
</script>


</body>
</html>


